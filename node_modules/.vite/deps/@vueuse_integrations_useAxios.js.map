{
  "version": 3,
  "sources": ["../../@vueuse/integrations/useAxios.mjs"],
  "sourcesContent": ["import { shallowRef, ref } from 'vue-demi';\nimport { noop, until } from '@vueuse/shared';\nimport axios, { AxiosError } from 'axios';\n\nfunction useAxios(...args) {\n  const url = typeof args[0] === \"string\" ? args[0] : void 0;\n  const argsPlaceholder = typeof url === \"string\" ? 1 : 0;\n  const defaultOptions = {\n    immediate: !!argsPlaceholder,\n    shallow: true,\n    abortPrevious: true\n  };\n  let defaultConfig = {};\n  let instance = axios;\n  let options = defaultOptions;\n  const isAxiosInstance = (val) => !!(val == null ? void 0 : val.request);\n  if (args.length > 0 + argsPlaceholder) {\n    if (isAxiosInstance(args[0 + argsPlaceholder]))\n      instance = args[0 + argsPlaceholder];\n    else\n      defaultConfig = args[0 + argsPlaceholder];\n  }\n  if (args.length > 1 + argsPlaceholder) {\n    if (isAxiosInstance(args[1 + argsPlaceholder]))\n      instance = args[1 + argsPlaceholder];\n  }\n  if (args.length === 2 + argsPlaceholder && !isAxiosInstance(args[1 + argsPlaceholder]) || args.length === 3 + argsPlaceholder) {\n    options = args[args.length - 1] || defaultOptions;\n  }\n  const {\n    initialData,\n    shallow,\n    onSuccess = noop,\n    onError = noop,\n    immediate,\n    resetOnExecute = false\n  } = options;\n  const response = shallowRef();\n  const data = (shallow ? shallowRef : ref)(initialData);\n  const isFinished = ref(false);\n  const isLoading = ref(false);\n  const isAborted = ref(false);\n  const error = shallowRef();\n  let abortController = new AbortController();\n  const abort = (message) => {\n    if (isFinished.value || !isLoading.value)\n      return;\n    abortController.abort(message);\n    abortController = new AbortController();\n    isAborted.value = true;\n    isLoading.value = false;\n    isFinished.value = false;\n  };\n  const loading = (loading2) => {\n    isLoading.value = loading2;\n    isFinished.value = !loading2;\n  };\n  const resetData = () => {\n    if (resetOnExecute)\n      data.value = initialData;\n  };\n  const waitUntilFinished = () => new Promise((resolve, reject) => {\n    until(isFinished).toBe(true).then(() => error.value ? reject(error.value) : resolve(result));\n  });\n  const promise = {\n    then: (...args2) => waitUntilFinished().then(...args2),\n    catch: (...args2) => waitUntilFinished().catch(...args2)\n  };\n  let executeCounter = 0;\n  const execute = (executeUrl = url, config = {}) => {\n    error.value = void 0;\n    const _url = typeof executeUrl === \"string\" ? executeUrl : url != null ? url : config.url;\n    if (_url === void 0) {\n      error.value = new AxiosError(AxiosError.ERR_INVALID_URL);\n      isFinished.value = true;\n      return promise;\n    }\n    resetData();\n    if (options.abortPrevious !== false)\n      abort();\n    loading(true);\n    executeCounter += 1;\n    const currentExecuteCounter = executeCounter;\n    isAborted.value = false;\n    instance(_url, { ...defaultConfig, ...typeof executeUrl === \"object\" ? executeUrl : config, signal: abortController.signal }).then((r) => {\n      if (isAborted.value)\n        return;\n      response.value = r;\n      const result2 = r.data;\n      data.value = result2;\n      onSuccess(result2);\n    }).catch((e) => {\n      error.value = e;\n      onError(e);\n    }).finally(() => {\n      var _a;\n      (_a = options.onFinish) == null ? void 0 : _a.call(options);\n      if (currentExecuteCounter === executeCounter)\n        loading(false);\n    });\n    return promise;\n  };\n  if (immediate && url)\n    execute();\n  const result = {\n    response,\n    data,\n    error,\n    isFinished,\n    isLoading,\n    cancel: abort,\n    isAborted,\n    isCanceled: isAborted,\n    abort,\n    execute\n  };\n  return {\n    ...result,\n    ...promise\n  };\n}\n\nexport { useAxios };\n"],
  "mappings": "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",
  "names": []
}
